<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Cerrar Sesion</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Seguro que quieres continuar?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-warning" (click)="logout()">Confirmar</button>
      </div>
    </div>
  </div>
</div>

<!--  <div style="background-color: rgba(33, 37, 41);color:white" class="page-wrapper chiller-theme toggled">
  <a id="show-sidebar" class="btn btn-sm btn-dark" href="#">
    <i class="fas fa-bars"></i>
  </a>

  <nav style="border-right: 2px solid rgb(255, 204, 0);" id="sidebar" class="sidebar-wrapper">
    <div class="sidebar-content">
      <div class="sidebar-brand">
        <a href="#">Checkered Flag</a>

        <div id="close-sidebar">
        </div>
      </div>
      <div class="sidebar-header">
        <div class="user-pic">
          <img style="background-color: white;padding: 5;" class="img-responsive img-rounded" src="/assets/driverImgs/hamilton.png"
            alt="User picture">
        </div>
        <div class="user-info">
          <span class="user-name">{{director?.name}}
            <strong>| Director</strong>
          </span>
          <span class="user-role">Administrator</span>
          <span class="user-status">
            <span>Online</span><i class="bi bi-circle-fill"></i>
          </span>
        </div>
      </div>

      <div class="sidebar-search">
        <div>
          <div class="input-group">
            <input type="text" class="form-control search-menu" placeholder="Search...">
            <div class="input-group-append">
              <span class="input-group-text">
                <i class="fa fa-search" aria-hidden="true"></i>
              </span>
            </div>
          </div>
        </div>
      </div>

      <div class="sidebar-menu">
        <ul>
          <li class="header-menu">
            <span>General</span>
          </li>
          <li class="sidebar-dropdown">
            <a href="#">
              <i class="bi bi-speedometer"></i>
              <span>Dashboard</span>

            </a>
          </li>
          <li class="sidebar-dropdown">
            <a routerLink="drivers">
              <i class="bi bi-person-vcard-fill"></i>
              <span>Drivers</span>
            </a>
          </li>
          <li class="sidebar-dropdown">
            <a routerLink="teams">
              <i class="bi bi-people-fill"></i>
              <span>Teams</span>
            </a>
          </li>
          <li class="sidebar-dropdown">
            <a href="#">
              <i class="bi bi-reception-4"></i>
              <span>Charts</span>
            </a>
          </li>
          <li class="sidebar-dropdown">
            <a href="#">
              <i class="bi bi-calendar-week-fill"></i>
              <span>Season</span>
            </a>
          </li>
          <li class="header-menu">
            <span>Workspace</span>
          </li>
          <li>

          </li>
          <li>
            <a routerLink="addRaces">
              <i class="bi bi-tools"></i>
              <span>Circuits Management</span>
            </a>
          </li>
          <li>
            <a href="Qualy">
              <i class="bi bi-server"></i>
              <span>Results Management</span>
            </a>
          </li>
          <li>
            <a routerLink="addResults">
              <i class="bi bi-wrench-adjustable-circle-fill"></i>
              <span>Results</span>
            </a>
          </li>
        </ul>
      </div>

    </div>

    <div class="sidebar-footer">
      <a href="#">
        <i class="fa fa-bell"></i>
        <span class="badge badge-pill badge-warning notification">3</span>
      </a>
      <a href="#">
        <i class="fa fa-envelope"></i>
        <span class="badge badge-pill badge-success notification">7</span>
      </a>
      <a href="#">
        <i class="fa fa-cog"></i>
        <span class="badge-sonar"></span>
      </a>
      <a href="#">
        <i class="fa fa-power-off"></i>
      </a>
    </div>
  </nav>


    <main style="background: #19001c;min-height: 110vh;" class="page-content">
      <div class="container-fluid">

        <h2>Welcome Back!   <strong style="color: rgb(146, 110, 19);">{{nombre}}</strong></h2>
        <hr>
        <app-admin-cards></app-admin-cards>
        <div class="row">



          <div class="jumbotron">
            <small>Informacion De Liga</small>
            <div class="p-4 p-md-5 mb-4 rounded text-bg-dark">
              <div class="col-md-6 px-0">
                <h1 class="display-4 fst-italic">League {{ligaObj?.nombre}}</h1>
                <p class="lead my-3">{{ligaObj?.descripcion}}</p>
                <p>{{ligaObj?.ubicacion}}</p>

                <p class="lead mb-0"><a  [routerLink]="'/MyLeague'"  class="text-white fw-bold">Acceder...</a></p>
              </div>
            </div>
          </div>





          <div class="container">
            <div class="row">
                <div class="col-xl-12 mb-3 mb-lg-5 ">
                    <div class="card">
                        <div class="d-flex card-header justify-content-between">
                            <h5 style="color:black" class="me-3 mb-0">Top Drivers</h5>

                            <a href="#!.html">View All</a>
                        </div>
                        <div class="card-body">
                            <ul class="list-group list-group-flush">

                                <li [routerLink]="'drivers/'+driver.driverId" *ngFor="let driver of drivers" class="list-group-item pt-0" style="cursor:pointer;">

                                    <div  class="d-flex align-items-center">
                                        <div class="flex-shrink-0 me-3">
                                            <img src="{{driver.imageDriver}}" alt="" class="avatar rounded-circle" />
                                        </div>
                                        <div class="flex-grow-1">
                                            <h6 class="mb-0">{{driver.name}}</h6>
                                            <p class="mb-0 text-muted">{{driver.country}}</p>
                                            <p><span class="fi fi-{{ driver.flag }}"></span></p>
                                        </div>

                                        <div  class="flex-shrink-0 text-end">
                                            <span style="margin-right: 15px;">{{driver.currentPrice}} </span>
                                              <div  [hidden]="driver.team !== 0" style="float: right;">
                                                  <i  alt="No tiene equipo" style="color:rgb(255, 145, 0)" class="bi bi-exclamation-triangle-fill"></i>
                                              </div>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
          </div>




           <form [hidden]="ligaObj != null"  [formGroup]="taskForm" (ngSubmit)="onSubmit()" autocomplete="off">
            <div class="mb-3">
              <label for="recipient-name" class="col-form-label">Nombre:</label>
              <input type="text" formControlName="nombre" required class="form-control" id="recipient-name">
            </div>

            <div class="mb-3">
              <label for="message-text" class="col-form-label">descripcion</label>
              <textarea class="form-control" formControlName="descripcion" id="message-text"></textarea>
            </div>
            <div class="mb-3">
              <label for="message-text" class="col-form-label">Ubicacion</label>
              <textarea class="form-control" formControlName="ubicacion" id="message-text"></textarea>
            </div>
            <div class="mb-3">
              <label style="color:black" >id de piloto: </label>



              <input class="form-control" type="number" formControlName="directorId"><br><br>
            </div>

            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              <button type="submit" class="btn btn-primary" [disabled]="!taskForm.valid">Crear Tarea</button>
            </div>
          </form>



        </div>
      </div>
    </main> -->




    <body>

      <div class="app">
        <!-- <app-admin-cards></app-admin-cards> -->
        <header class="app-header">

          <div class="app-header-logo">
            <div class="logo">
              <span class="logo-icon">
                <img src="https://assets.codepen.io/285131/almeria-logo.svg" />
              </span>
              <h1 class="logo-title">
                <span>Checkered</span>
                <span>Flag</span>
              </h1>
            </div>
          </div>
          <div class="app-header-navigation">
            <div class="tabs">
              <div *ngIf="teams?.length==0" class="alert alert-warning" role="alert">
                Crea pilotos y equipos para empezar tu mundial
                <button [routerLink]="'/admin/addTeam'" class="btn btn-primary">Equipos</button>

              </div>
              <div *ngIf="driversCount?.length==0" class="alert alert-warning" role="alert">
                Crea ahora un piloto
                <button [routerLink]="'/admin/addDriver'" class="btn btn-primary">Pilotos</button>
              </div>

            </div>

            <div class="tabs">
              <a href="#">
                Overview
              </a>
              <a href="#" class="active">
                Payments
              </a>
              <a href="#">
                Cards
              </a>
              <a href="#">
                Account
              </a>
              <a href="#">
                System
              </a>
              <a href="#">
                Business
              </a>
            </div>
          </div>
          <div [hidden]="director==null" class="app-header-actions">
            <button [routerLink]="'/profile'" class="user-profile">
              <span>{{director?.name}}</span>
              <span>
                <img src="/assets/img/vasseur.jpg" />
              </span>
            </button>
            <div class="app-header-actions-buttons">
              <button  class="btn" data-bs-toggle="modal" data-bs-target="#exampleModal"  style="background-color: red;" class="icon-button large">
                <i class="bi bi-door-closed"></i>
              </button>
              <!-- <button class="btn" data-bs-toggle="modal" data-bs-target="#exampleModal" style="float: right;background-color: rgb(147, 44, 147);">Logout</button> -->
              <!-- <button class="icon-button large">
                <i class="ph-bell"></i>
              </button> -->
            </div>
          </div>
          <div class="app-header-mobile">
            <button class="icon-button large">
              <i class="ph-list"></i>
            </button>
          </div>

        </header>
        <div style="min-height: 90vh;"  class="app-body">

          <div *ngIf="ligaObj==null" class="app-body-main-content" style="position: absolute;top: 50%;left: 40%;">
            <h2>Debes Añadir una Liga</h2>
            <button [routerLink]="'/addLiga'" class="btn btn-warning">Completar </button>
          </div>

          <div  *ngIf="director!=null && ligaObj!=null"  class="app-body-navigation">
            <nav class="navigation">
              <a href="#">
                <a routerLink="drivers">
                  <i class="bi bi-person-vcard-fill"></i>
                  <span>Drivers</span>
                </a>
              </a>
              <a routerLink="teams">
                <i class="bi bi-people-fill"></i>
                <span>Teams</span>
              </a>
              <a routerLink="charts">
                <i class="bi bi-reception-4"></i>
                <span>Charts</span>
              </a>
              <a routerLink="addRaces">
                <i class="bi bi-tools"></i>
                <span>Add Races</span>
              </a>
                <a routerLink="races-management">
                  <i class="bi bi-speedometer"></i>
                  <span>Races Management</span>
                </a>

            </nav>
            <footer class="footer">
              <h1>Alen<small>©</small></h1>
              <div>
                ALEN TOKALIC©<br />
                All Rights Reserved 2023
              </div>
            </footer>
          </div>

          <div  *ngIf="director!=null && ligaObj!=null"  class="app-body-main-content">

            <section>
              <div class="jumbotron">
                <small>Informacion De Liga</small>
                <div class="p-4 p-md-5 mb-4 rounded text-bg-dark">
                  <div class="col-md-6 px-0">
                    <h1 class=" fst-italic">League {{ligaObj?.nombre}}</h1>
                    <p>{{ligaObj?.descripcion}}</p>
                    <p class="lead mb-0"><a  [routerLink]="'/MyLeague'"  class="text-white fw-bold">Acceder...</a></p>
                  </div>
                </div>
              </div>
            </section>

            <section class="service-section">
              <h2>Pilotos</h2>
              <div class="service-section-header">
                <!-- <div class="search-field">
                  <i class="ph-magnifying-glass"></i>
                  <input type="text" placeholder="Account number">
                </div> -->
                <div class="dropdown-field">
                  <select (change)="onSelectChange($event)">
                    <option value="rating">Work</option>
                    <option value="points">Points</option>
                  </select>

                  <i class="ph-caret-down"></i>
                </div>
                <!-- <button class="flat-button">
                  Search
                </button> -->
              </div>
              <div class="mobile-only">
                <button class="flat-button">
                  Toggle search
                </button>
              </div>
              <div class="tiles">
                <article [routerLink]="'drivers/'+item.driverId" style="background-color: {{item.teamColor}};" *ngFor="let item of driversInfoNormal?.slice(0,3);index as i"  class="tile">
                  <div class="tile-header">
                    <i class="ph-lightning-light"></i>
                    <h3>
                    <span style="color: black; ; box-shadow: black; font-weight: bold;">{{i+1}}º</span>
                      <span>{{item.driverName}} | <span style="font-weight: bold;font-style: italic;color: black;">{{item.driverNumber}}</span> </span>
                    </h3>
                  </div>
                    <span><strong>{{item.driverPoints}}</strong>Pts</span>
                    <span  style="background-image: url({{item.driverImageDriver}});background-size: contain;" class="icon-button">
                      <i class="ph-caret-right-bold"></i>
                    </span>
                </article>
              </div>
              <div class="service-section-footer">
                <p>{{textoExplicativo}}</p>
              </div>
            </section>
            <section class="transfer-section">
              <div class="transfer-section-header">
                <h2>Ronda {{grandPrix?.raceRound}}</h2>
                <div class="filter-options">
                  <p>{{grandPrix?.raceName}}</p>
                  <button class="icon-button fi fi-{{grandPrix?.circuitFlag}}">
                  </button>
                  <button style="background-image: url({{winner?.imageDriver}});background-size: cover;" class="icon-button">
                  </button>
                </div>
              </div>

              <div class="transfers">
                <div  *ngIf="raceResults.length==0" >
                  <h6>Clasificacion</h6>
                  <div class="transfer" *ngFor="let item of qualyResults;index as i">

                    <div style="background-image:url({{item.driverImageDriver}}) ;background-size: cover;" class="transfer-logo">
                    </div>
                    <span> | <span style="color: gold;font-weight: bold;">{{i+1}}</span> </span>
                    <dl  class="transfer-details">
                      <div [routerLink]="'/admin/drivers/'+item.driverId">
                        <dt >{{item.driverName}}</dt>
                        <dd>{{item.driverLastName!.slice(0,3).toUpperCase()}}</dd>
                      </div>
                      <div>
                        <img width="40" src="{{item.teamShieldImage}}" alt="">
                      </div>
                      <div class="transfer-number">
                        <img src="{{item.teamVehicleImage}}" alt="">
                      </div>

                    </dl>


                </div>
              </div>

              <div  *ngIf="raceResults.length!=0" >


                <div  style="padding: 10px;" [ngStyle]="{'background-color': i == 0 ? '#2a2c31' : 'inherit'}" class="transfer" *ngFor="let item of raceResults;index as i">
                  <h6 style="margin-right: 5px;color: rgb(157, 0, 31);font-weight: bolder;">{{i+1}}</h6>
                  <div style="background-image:url({{item.driverImageDriver}}) ;background-size: cover;" class="transfer-logo">
                  </div>
                  <dl class="transfer-details">
                    <div>
                      <dt>{{item.driverName}}</dt>
                      <dd>{{item.driverLastName!.slice(0,3).toUpperCase()}}</dd>
                    </div>
                    <div>
                      <img width="70" src="{{item.teamShieldImage}}" alt="">
                    </div>
                    <div>
                      <dt>{{item.resultPoints}} Pts</dt>
                      <dd>{{item.resultGrid-item.resultPosition}}</dd>
                    </div>
                  </dl>
                  <div class="transfer-number">
                    <img src="{{item.teamVehicleImage}}" alt="">
                  </div>


                  <ng-template #arrowUp>
                    <span><i style="color: green" class="bi bi-caret-up-fill"></i></span>
                  </ng-template>
                  <ng-template #arrowDown>
                    <span><i style="color: rgb(209, 33, 33);" class="bi bi-caret-down-fill"></i></span>
                  </ng-template>
                  <ng-template #arrowNone>
                    <span><i style="color: gray;" class="bi bi-caret-right-fill"></i></span>
                  </ng-template>
                  <ng-container *ngIf="item.resultGrid > item.resultPosition; else ifCond">
                    <ng-container *ngTemplateOutlet="arrowUp"></ng-container>
                  </ng-container>
                  <ng-template #ifCond>
                    <ng-container *ngIf="item.resultGrid < item.resultPosition; else elseCond">
                      <ng-container *ngTemplateOutlet="arrowDown"></ng-container>
                    </ng-container>
                  </ng-template>
                  <ng-template #elseCond>
                    <ng-container *ngTemplateOutlet="arrowNone"></ng-container>
                  </ng-template>


                </div>
              </div>

              <div class="transfer">
                  <div class="card-body">
                    <ul class="list-group list-group-flush">

                        <li [routerLink]="'drivers/'+driver.driverId" *ngFor="let driver of driversCount" class="list-group-item pt-0" style="cursor:pointer;">

                            <div  class="d-flex align-items-center">
                                <div class="flex-shrink-0 me-3">
                                    <img src="{{driver.imageDriver}}" alt="" class="avatar rounded-circle" />
                                </div>
                                <div class="flex-grow-1">
                                    <h6 class="mb-0">{{driver.name}}</h6>
                                    <p class="mb-0 text-muted">{{driver.country}}</p>
                                    <p><span class="fi fi-{{ driver.flag }}"></span></p>
                                </div>

                                <div  class="flex-shrink-0 text-end">
                                    <span style="margin-right: 15px;">{{driver.currentPrice}} </span>
                                      <div  [hidden]="driver.team !== 0" style="float: right;">
                                          <i  alt="No tiene equipo" style="color:rgb(255, 145, 0)" class="bi bi-exclamation-triangle-fill"></i>
                                      </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
                </div>




              </div>
            </section>
          </div>
          <div  *ngIf="director!=null && ligaObj!=null"  class="app-body-sidebar">
            <section class="payment-section">
              <h2>Equipos</h2>
              <div class="payment-section-header">
                <p>Mejores equipos del momento</p>
                <div>
                  <!-- <button class="card-button mastercard">
                    <svg width="2001" height="1237" viewBox="0 0 2001 1237" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <g id="a624784f2834e21c94a1c0c9a58bbbaa">
                        <path id="7869b07bea546aa59a5ee138adbcfd5a" d="M1270.57 1104.15H729.71V132.15H1270.58L1270.57 1104.15Z" fill="currentColor"></path>
                        <path id="b54e3ab4d7044a9f288082bc6b864ae6" d="M764 618.17C764 421 856.32 245.36 1000.08 132.17C891.261 46.3647 756.669 -0.204758 618.09 9.6031e-07C276.72 9.6031e-07 0 276.76 0 618.17C0 959.58 276.72 1236.34 618.09 1236.34C756.672 1236.55 891.268 1189.98 1000.09 1104.17C856.34 991 764 815.35 764 618.17Z" fill="currentColor"></path>
                        <path id="67f94b4d1b83252a6619ed6e0cc0a3a1" d="M2000.25 618.17C2000.25 959.58 1723.53 1236.34 1382.16 1236.34C1243.56 1236.54 1108.95 1189.97 1000.11 1104.17C1143.91 990.98 1236.23 815.35 1236.23 618.17C1236.23 420.99 1143.91 245.36 1000.11 132.17C1108.95 46.3673 1243.56 -0.201169 1382.15 -2.24915e-05C1723.52 -2.24915e-05 2000.24 276.76 2000.24 618.17" fill="currentColor"></path>
                      </g>
                    </svg>
                  </button> -->
                  <!-- <button class="card-button visa active">
                    <svg xmlns="http://www.w3.org/2000/svg" width="2500" height="2500" viewBox="0 0 141.732 141.732">
                      <g fill="currentColor">
                        <path d="M62.935 89.571h-9.733l6.083-37.384h9.734zM45.014 52.187L35.735 77.9l-1.098-5.537.001.002-3.275-16.812s-.396-3.366-4.617-3.366h-15.34l-.18.633s4.691.976 10.181 4.273l8.456 32.479h10.141l15.485-37.385H45.014zM121.569 89.571h8.937l-7.792-37.385h-7.824c-3.613 0-4.493 2.786-4.493 2.786L95.881 89.571h10.146l2.029-5.553h12.373l1.14 5.553zm-10.71-13.224l5.114-13.99 2.877 13.99h-7.991zM96.642 61.177l1.389-8.028s-4.286-1.63-8.754-1.63c-4.83 0-16.3 2.111-16.3 12.376 0 9.658 13.462 9.778 13.462 14.851s-12.075 4.164-16.06.965l-1.447 8.394s4.346 2.111 10.986 2.111c6.642 0 16.662-3.439 16.662-12.799 0-9.72-13.583-10.625-13.583-14.851.001-4.227 9.48-3.684 13.645-1.389z" />
                      </g>
                      <path d="M34.638 72.364l-3.275-16.812s-.396-3.366-4.617-3.366h-15.34l-.18.633s7.373 1.528 14.445 7.253c6.762 5.472 8.967 12.292 8.967 12.292z" fill="currentColor" />
                      <path fill="none" d="M0 0h141.732v141.732H0z" />
                    </svg>
                  </button> -->
                </div>
              </div>
              <div class="payments">
                <div style="cursor: pointer;" [routerLink]="'teams/'+item.teamId" *ngFor="let item of teams?.slice(0,(teams!.length/2))"   class="payment">
                  <div style="background-color: {{item.color}};" class="card">
                    <span><img width="60" src="{{item.shieldImage}}" alt=""></span>
                    <span>
                      {{item.points}}Pts
                    </span>
                  </div>
                  <div class="payment-details">
                    <h3> {{item.name}}</h3>
                    <div>
                      <span><img src="{{item.vehicleImage}}" alt=""></span>
                      <button class="icon-button">
                        <span class="fi fi-{{item.flag}}"></span>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="payment-section-footer">
                <section class="transfer-section">
              <div class="transfer-section-header">
                <h2>Market Updates</h2>
                <div class="filter-options">
                  <p>Pilotos ordenados con mas valor de mercado</p>
                  <button style="background-color: gold;" class="icon-button">
                    <i style="color: black;" class="bi bi-currency-dollar"></i>
                  </button>
                  <button style="background-color: green;"  class="icon-button">
                    <i class="bi bi-caret-up-fill"></i>
                  </button>
                </div>
              </div>
              <div class="transfers">
                <div  [routerLink]="'/admin/drivers/'+item.driverId"  class="transfer" *ngFor="let item of driversOrderedByPoints">
                  <div style="background-image:url({{item.driverImageDriver}}) ;background-size: cover;" class="transfer-logo">
                  </div>
                  <dl class="transfer-details">
                    <div>
                      <dt>{{item.driverName}}</dt>
                      <dd>{{item.drivercurrentPrice | currency:'USD'}}</dd>
                    </div>

                  </dl>
                  <div class="transfer-number">
                   <span [ngStyle]="{'color': item.driverseasonChange < 0 ? 'red' : 'green'}">{{item.driverseasonChange}}</span>
                  </div>
                </div>
              </div>
            </section>
              </div>

            </section>

          </div>
        </div>
      </div>
    </body>
